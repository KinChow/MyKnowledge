# 计算机性能和功耗

## 性能

* 响应时间或者执行时间
  * 让计算机跑得更快
  * 响应时间指的是执行程序要花多少时间

* 吞吐率或者带宽
  * 让计算机搬得更多
  * 吞吐率在一定时间范围内到底能处理多少事情，处理的数据或者执行的程序指令



性能的定义：响应时间的倒数



SPEC提供CPU的基准测试程序



计算机的计时单位 

CPU时钟



统计时间 

程序运行结束的时间减去程序运行开始的时间

Wall clock time (elapsed time)

```shell
# linux 统计程序的时间
time 
```

* real time：运行程序，整个过程中流逝的时间
* user time：用户态运行指令的时间
* sys time：内核里运行指令的时间



程序实际花费CPU的执行时间 = user time + sys time



程序的CPU执行时间 = CPU时钟周期数 * 时钟周期时间



CPU时钟周期数 = 指令数 * 每条指令平均时钟周期数



## 功耗

程序CPU的执行时间 = 指令数 * CPI * clock cycle time

要想提高计算机的性能，可以从**指令数**、**CPI**和**CPU主频**入手。

CPU又叫做超大规模集成电路。这些电路是由一个个晶体管组成的。CPU计算时，实际上就是让晶体管的开关不断去打开和关闭来组合成各种运算和功能。

要想计算得快，一方面我们可以在CPU同样的面积里面增加晶体管数量，也就是增加密度。另一方面，让晶体管的打开和关闭速度更快一点，也就是提高主频。而这两者都会增加功耗带来耗电和散热的问题。

CPU的面积变大晶体管之间的距离也会变大电传输的时间就变长，运算速度自然下降

在CPU里面能够放下晶体管的数量和晶体管开关的频率是有限的

功耗 ～= 1/2 * 负载电容 * 电压的平方 * 开关频率 * 晶体管数量

